<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--
    Greens
    -----------
    green #3CCF00
    drak green #006837

    blocks
    ---------
    d grey #333333
    mid grey #505050
    light grey #EFEFEF


    text
    ---------
    mid #636363
    dark #424242
    light #ffffff



    - video capture/camera page
    - next/FT article -> video capture
    - Twitter link -> video capture
  -->

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@voxpopper">
    <meta name="twitter:title" content="VoxPopper">
    <meta name="twitter:description" content="Should European football associations boycott the next World Cup? Get your opinions heard.">
    <meta name="twitter:image" content="http://ft-interactive.github.io/voxpopper/sepp.png" />
  </head>
  <body>

  <style>
    html, body {
      font-size: 20px;
      font-family: sans-serif;
      background-color: #333333;
    }

    #loading-msg {
      content "VoxPopper";
      color: rgba(0,0,0,0.4);
      display: block;
      position: fixed;
      top: 25%;
      left: 25%;
      font-size: 2rem;

    }

    #stop {
      position:fixed;
      width: 100%;
      height: 111px;
      bottom: 0px;
      background-color: rgba(0,0,0,0.6);
      font-size: 1rem;
      outline: none;
      text-align: center;
      border: none;
      padding: 0;
      display: block;
    }

    #stop-hit {
      background: #3CCF00;
      color: #333333;
      margin: 10px auto;
      width: 66%;
      max-width: 555px;
      padding: .8rem;
    }

    #recording {
      position: fixed;
      top: 10px;
      right: 20px;
      color: red;
      font-size: 1.5rem;
      animation: blink 1s steps(5, start) infinite;
       -webkit-animation: blink 1s steps(5, start) infinite;
     }

    #recording:before {
      content: " ";
      width: 30px;
      position: relative;
      top: 5px;
      height: 30px;
      display: inline-block;
      background: red;
      border-radius: 100%;
    }

    #basic-stream{
      position:fixed;
      width:100%;
      height:100%;
      border: 10px solid green;
    }


   @keyframes blink {
     to {
       visibility: hidden;
     }
   }
   @-webkit-keyframes blink {
     to {
       visibility: hidden;
     }
   }
  </style>
  </head>
  <body style="margin:0;">
    <div id="loading-msg">
      VoxPopper
    </div>
		<video id="basic-stream" class="videostream" autoplay="" muted></video>
    <div id="recording">
      REC
    </div>
    <button name="button" id="stop">
      <div id="stop-hit">
        SEND
      </div>
      </button>
    <script>
    	function hasGetUserMedia() {
			  return !!(navigator.getUserMedia || navigator.webkitGetUserMedia ||
			            navigator.mozGetUserMedia || navigator.msGetUserMedia);
			}

			if (hasGetUserMedia()) {
			     var errorCallback = function(e) {
				    console.log('Reeeejected!', e);
				  };
					navigator.getUserMedia  = navigator.getUserMedia ||
                          navigator.webkitGetUserMedia ||
                          navigator.mozGetUserMedia ||
                          navigator.msGetUserMedia;
				  // Not showing vendor prefixes.
			    var video = document.querySelector('video');

				  navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
				    video.src = window.URL.createObjectURL(localMediaStream);

				    // Note: onloadedmetadata doesn't fire in Chrome when using it with getUserMedia.
				    // See crbug.com/110938.
				    video.onloadedmetadata = function(e) {
				      // Ready to go. Do some stuff.
				    };
				  }, errorCallback);
			} else {
			  alert('getUserMedia() is not supported in your browser');
			}

    </script>
  </body>
</html>
